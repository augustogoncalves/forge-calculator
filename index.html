<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" />
    <title>Forge Price Calculator</title>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <script>
        let totalCost = 0;
        $(document).ready(() => {
            $('#MDAdd').click(() => {
                let where = $('input[name="MDSource"]:checked').val();
                let type = $('#MDFileFormat').val();
                let number = $('#MDCount').val();
                let frequency = $('#MDFrequency').val();
                let unitCost = (where == 'BIM360' ? 0 : 1) * ((new RegExp("RVT|NWC|NWD")).test(type) ? 1.5 : 0.2)
                let totalCost = unitCost * number * frequency;
                let rowId = 'costRow' + Date.now();
                let pdf = (type == 'PDF' ? '<i class="far fa-info-circle" data-bs-toggle="modal" data-bs-target="#PDFNotice">' : '');
                $('#MDTable tr:last').after('<tr id=' + rowId + '><td>' + where + '</td><td>' + type + '</td><td>' + number + ' x ' + frequency + ' = ' + number * frequency + '</td><td>' + number * frequency + ' x ' + unitCost + ' = ' + totalCost.toFixed(1) + ' ' + pdf + '</td><td><i class="far fa-trash-alt" onclick="deleteRow(\'' + rowId + '\', ' + totalCost + ')"></i></td></tr>');
                updateTotal(totalCost);
                $('#MDTable').show();
            })

            $('#MDTable').hide();
        })

        function updateTotal(add) {
            totalCost += add;
            $('#TotalCost').html(Math.abs(totalCost).toFixed(1) + ' Cloud Credits');
        }

        function deleteRow(rowId, cost) {
            updateTotal(cost * -1);
            $('#' + rowId).remove();
        }
    </script>
    <div class="container-sm">
        <div class="row">
            <div class="col">
                <center><br /><br /><br />Forge Calculator<br /><br /><br /></center>
            </div>
        </div>
        <div class="row">
            <div class="col-10">

                <div class="accordion" id="accordionExample">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                I need to view 2D or 3D models or extract metadata
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                            data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                                Please specify where the files are hosted, type, how many files and how often files are
                                updated (per month).
                                <hr>
                                <div class="row">
                                    <div class="col">
                                        <br />
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="MDSource"
                                                id="flexRadioDefault1" value="BIM360">
                                            <label class="form-check-label" for="flexRadioDefault1">
                                                BIM 360
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="MDSource"
                                                id="flexRadioDefault2" value="Other" checked>
                                            <label class="form-check-label" for="flexRadioDefault2">
                                                Other
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <label for="exampleDataList" class="form-label">File type</label>
                                        <select class="form-select" aria-label="Default select example"
                                            id="MDFileFormat">
                                            <option value="RVT">Revit</option>
                                            <option value="NWD/NWC">Navisworks</option>
                                            <option value="DWG/DXF">AutoCAD</option>
                                            <option value="IAM/IPT">Inventor</option>
                                            <option value="DWF">DWF</option>
                                            <option value="PDF">PDF</option>
                                        </select>
                                    </div>
                                    <div class="col">
                                        <div class="mb-3">
                                            <label for="exampleFormControlInput1" class="form-label">How many
                                                files</label>
                                            <input type="number" class="form-control" id="MDCount" min="1" value="1">
                                        </div>
                                    </div>
                                    <div class="col">
                                        <label for="exampleFormControlInput1" class="form-label">How often is
                                            updated</label>
                                        <div class="input-group mb-3">
                                            <input type="number" class="form-control" id="MDFrequency" min="1" value="1"
                                                aria-describedby="basic-addon2">
                                            <span class="input-group-text" id="basic-addon2">per month</span>
                                        </div>
                                    </div>
                                    <div class="col"><br /><button type="button" id="MDAdd"
                                            class="btn btn-primary">Add</button>
                                    </div>
                                </div>
                                <hr />
                                <table class="table" id="MDTable">
                                    <thead>
                                        <tr>
                                            <th scope="col">Source</th>
                                            <th scope="col">Type</th>
                                            <th scope="col">Translations</th>
                                            <th scope="col">Cost</th>
                                            <th scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                I need to create or modify files
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                            data-bs-parent="#accordionExample">
                            <div class="accordion-body">

                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                I need to generate mesh from photos/pictures
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                            data-bs-parent="#accordionExample">
                            <div class="accordion-body">

                            </div>
                        </div>
                    </div>

                </div>

            </div>
            <div class="col-2">
                <center>
                    <h4>Total per month<br /><span class="badge bg-secondary" id="TotalCost">00 Cloud Credits</span>
                        </h1>
                </center>
            </div>
        </div>
    </div>

    <div class="modal fade" id="PDFNotice" tabindex="-1" aria-labelledby="PDFModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="PDFModalLabel">About Viewer PDF support</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    PDF can be visualized using the Autodesk.PDF extension without translation, but requires the file to
                    be hosted and served directly.
                    <a href="https://forge.autodesk.com/en/docs/viewer/v7/reference/Extensions/PDFExtension/"
                        target="_blank">Learn more</a>.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Ok, thanks.</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>